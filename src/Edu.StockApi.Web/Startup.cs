using System.Reflection;using Edu.StockApi.Web.Configuration.Middleware;using Edu.StockApi.Web.GrpcServices;using Edu.StockApi.Web.Services;using Microsoft.OpenApi.Models;namespace Edu.StockApi.Web;public class Startup{    public void ConfigureServices(IServiceCollection services)    {        //  Добавление контроллеров        services.AddControllers();                //  Добавление GRPC        services.AddGrpc();                //   DI        services.AddSingleton<IStockService, StockService>();        //  добавление Swagger        services.AddSwaggerGen(options =>        {            //  Описание свагера приложения            options.SwaggerDoc("v1", new OpenApiInfo(){Title = "Edu.StockApi", Version = "v1"} );                        //  Добавление документации в сваггер            var xmlFileName = Assembly.GetExecutingAssembly().GetName().Name + ".xml";            var xmlFilePath = Path.Combine(AppContext.BaseDirectory, xmlFileName);            options.IncludeXmlComments(xmlFilePath);                        //  Добавить фильтр header            options.OperationFilter<HeaderOperationFilter>();        });    }        public void Configure(IApplicationBuilder app)    {        //  Настройка middleware переход        app.Map("/version", builder => builder.UseMiddleware<VersionMiddleware>());        //  Добавить логгирование запроса        app.UseMiddleware<RequestLoggingMiddleware>();                //  Добавить сваггер        app.UseSwagger();        app.UseSwaggerUI();                //  Добавить роутинг        app.UseRouting();                //  Добавить контроллеры        app.UseEndpoints(endpoints =>        {            endpoints.MapGrpcService<StockApiGrpService>();            endpoints.MapControllers();        });    }}